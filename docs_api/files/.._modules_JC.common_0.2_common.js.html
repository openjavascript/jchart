<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../modules/JC.common/0.2/common.js - JChart</title>
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/widget.css">
    <link rel="stylesheet" href="../assets/css/tabview.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/comps1.js"></script>
    <script src="../assets/js/comps2.js"></script>
    <script src="../assets/js/comps3.js"></script>
    <script src="../assets/js/comps4.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../jc_logo.png" title="JChart"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/JC.BaseMVC.html">JC.BaseMVC</a></li>
            
                <li><a href="../classes/JC.BaseMVC.Model.html">JC.BaseMVC.Model</a></li>
            
                <li><a href="../classes/JC.common.html">JC.common</a></li>
            
                <li><a href="../classes/JC.f.html">JC.f</a></li>
            
                <li><a href="../classes/JC.PureMVC.html">JC.PureMVC</a></li>
            
                <li><a href="../classes/JC.PureMVC.Model.html">JC.PureMVC.Model</a></li>
            
                <li><a href="../classes/JChart.Base.html">JChart.Base</a></li>
            
                <li><a href="../classes/JChart.IconPoint.html">JChart.IconPoint</a></li>
            
                <li><a href="../classes/JChart.IconVLine.html">JChart.IconVLine</a></li>
            
                <li><a href="../classes/JChart.Line.html">JChart.Line</a></li>
            
                <li><a href="../classes/window.jQuery.html">window.jQuery</a></li>
            
                <li><a href="../classes/window.requirejs.html">window.requirejs</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../modules/JC.common/0.2/common.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function(define, _win) { &#x27;use strict&#x27;; define( [], function(){
    /**
     * 如果 console 不可用, 生成一个模拟的 console 对象
     */
    !window.console &amp;&amp; ( window.console = { 
        log: function(){ window.status = sliceArgs( arguments ).join(&#x27; &#x27;); }
         , dir: function(){} 
    });
    /**
     * 声明主要命名空间, 方便迁移
     */
    window.JC = window.JC || {};
    JC.log = function(){ JC.debug &amp;&amp; console.log( sliceArgs( arguments ).join(&#x27; &#x27;) ); };
    JC.dir = function(){ 
        JC.debug &amp;&amp; $.each( sliceArgs( arguments ), function( _ix, _item ){ console.dir( _item )} );
    };

    JC.PATH = JC.PATH || scriptPath();

    window.Bizs = window.Bizs || {};
    /**
     * JC.f 是 JC.common 的别名
     * &lt;br /&gt;具体使用请见 &lt;a href=&#x27;JC.common.html&#x27;&gt;JC.common&lt;/a&gt;&lt;/p&gt;
     * @class JC.f
     * @static
     */
    /**
     * JC 组件通用静态方法和属性 ( JC.common, &lt;b&gt;别名: JC.f&lt;/b&gt; )
     * &lt;br /&gt;所有 JC 组件都会依赖这个静态类
     * &lt;p&gt;&lt;b&gt;require&lt;/b&gt;: &lt;a href=&#x27;window.jQuery.html&#x27;&gt;jQuery&lt;/a&gt;&lt;/p&gt;
     * &lt;p&gt;&lt;a href=&#x27;https://github.com/openjavascript/jquerycomps&#x27; target=&#x27;_blank&#x27;&gt;JC Project Site&lt;/a&gt;
     * | &lt;a href=&#x27;http://jc2.openjavascript.org/docs_api/classes/JC.common.html&#x27; target=&#x27;_blank&#x27;&gt;API docs&lt;/a&gt;
     * | &lt;a href=&#x27;../../modules/JC.common/0.2/_demo/&#x27; target=&#x27;_blank&#x27;&gt;demo link&lt;/a&gt;&lt;/p&gt;
     * @class JC.common
     * @static
     * @version dev 0.2 2013-11-06 
     * @version dev 0.1 2013-07-04
     * @author  qiushaowei   &lt;suches@btbtd.org&gt; | 360 75 Team
     */
    JC.common = JC.f = {
        &quot;addUrlParams&quot;: addUrlParams
        , &quot;cloneDate&quot;: cloneDate
        , &quot;dateDetect&quot;: dateDetect
        , &quot;delUrlParam&quot;: delUrlParam
        , &quot;delUrlParams&quot;: delUrlParams
        , &quot;easyEffect&quot;: easyEffect
        , &quot;filterXSS&quot;: filterXSS
        , &quot;formatISODate&quot;: formatISODate
        , &quot;funcName&quot;: funcName
        , &quot;getJqParent&quot;: getJqParent

        , &quot;getUrlParam&quot;: getUrlParam
        , &quot;getUrlParams&quot;: getUrlParams
        , &quot;hasUrlParam&quot;: hasUrlParam
        , &#x27;urlHostName&#x27;: urlHostName
        , &quot;httpRequire&quot;: httpRequire
        , &quot;isSameDay&quot;: isSameDay
        , &quot;isSameWeek&quot;: isSameWeek
        , &quot;isSameMonth&quot;: isSameMonth
        , &quot;isSameSeason&quot;: isSameSeason
        , &quot;isSameYear&quot;: isSameYear
        , &quot;weekOfYear&quot;: weekOfYear
        , &quot;seasonOfYear&quot;: seasonOfYear
        , &quot;jcAutoInitComps&quot;: jcAutoInitComps

        , &quot;maxDayOfMonth&quot;: maxDayOfMonth
        , &quot;mousewheelEvent&quot;: mousewheelEvent
        , &quot;padChar&quot;: padChar
        , &quot;parentSelector&quot;: parentSelector
        , &quot;parseBool&quot;: parseBool
        , &quot;parseFinance&quot;: parseFinance
        , &quot;parseISODate&quot;: parseISODate
        , &quot;parseDate&quot;: parseDate
        , &quot;printf&quot;: printf
        , &quot;printKey&quot;: printKey
        , &quot;cloneObject&quot;: cloneObject

        , &quot;pureDate&quot;: pureDate
        , &quot;reloadPage&quot;: reloadPage
        , &quot;removeUrlSharp&quot;: removeUrlSharp
        , &quot;relativePath&quot;: relativePath
        , &quot;scriptContent&quot;: scriptContent
        , &quot;scriptPath&quot;: scriptPath
        , &quot;sliceArgs&quot;: sliceArgs
        , &quot;urlDetect&quot;: urlDetect
        , &quot;moneyFormat&quot;: moneyFormat
        , &quot;dateFormat&quot;: dateFormat
        , &quot;extendObject&quot;: extendObject
        , &quot;safeTimeout&quot;: safeTimeout
        , &quot;encoder&quot;: encoder
        , &quot;fixPath&quot;: fixPath
        , &quot;arrayId&quot;: arrayId
        , &quot;docSize&quot;: docSize

        /**
         * 判断 JC.common 是否需要向后兼容, 如果需要的话, 向 window 添加全局静态函数
         */
        , &quot;backward&quot;:
            function( _setter ){
                if( window.JC_BACKWARD || _setter ){
                    for( var k in JC.common ){
                        if( k == &#x27;backward&#x27; ) continue;
                        window[ k ] = window[ k ] || JC.common[ k ];
                    }
                }
            }
        , &quot;has_url_param&quot;: hasUrlParam
        , &quot;add_url_params&quot;: addUrlParams
        , &quot;get_url_param&quot;: getUrlParam
        , &quot;del_url_param&quot;: delUrlParam
        , &quot;reload_page&quot;: reloadPage
        , &quot;parse_finance_num&quot;: parseFinance
        , &quot;pad_char_f&quot;: padChar
        , &quot;script_path_f&quot;: scriptPath
        , &quot;ts&quot;: function(){ return new Date().getTime(); }
    };
    JC.f.backward();
    /**
     * jquery 1.9.1 默认 string 没有 trim 方法, 这里对 string 原型添加一个默认的 trim 方法
     */
    !String.prototype.trim &amp;&amp; ( String.prototype.trim = function(){ return $.trim( this ); } );
    /**
     * 兼容 低版本 ie Array 的 indexOf 方法
     */
    !Array.prototype.indexOf 
        &amp;&amp; ( Array.prototype.indexOf =
            function( _v ){
                var _r = -1;
                $.each( this, function( _ix, _item ){
                    if( _item == _v ){
                        _r = _ix;
                        return false;
                    }
                });
                return _r;
            });
    /**
     * 全局 css z-index 控制属性
     * &lt;br /&gt; &lt;b&gt;注意&lt;/b&gt;: 这个变量是 window.ZINDEX_COUNT
     * @property    ZINDEX_COUNT
     * @type        int
     * @default     50001
     * @static
     */
    window.ZINDEX_COUNT = window.ZINDEX_COUNT || 50001;

    function fixPath( _url ){
        if( /\\/.test( _url ) ){
            _url = _url.replace( /[\\]+/g, &#x27;\\&#x27; );
        }else{
            _url = _url.replace( /[\/]+/g, &#x27;/&#x27; );
        }
        return _url;
    }
    /**
     * 一维数组去重
     * @method  arrayId
     * @param   {Array}     _ar
     * @return Array
     * @static
     */
    function arrayId( _ar ){
        var _r = [], _k = {};
        
        for( var i = 0, j = _ar.length; i &lt; j; i++ ){
            if( !(_ar[i] in _k) ){
                _r.push( _ar[i] );
                _k[ _ar[i] ] = _ar[i];
            }
        }
        
        return _r;
    }
    /**
     * 把函数的参数转为数组
     * @method  sliceArgs
     * @param   {arguments}     args
     * @return Array
     * @static
     */
    function sliceArgs( _arg ){
        var _r = [], _i, _len;
        for( _i = 0, _len = _arg.length; _i &lt; _len; _i++){
            _r.push( _arg[_i] );
        }
        return _r;
    }
    /**
     * 取 URL 的 host name
     * @method  urlHostName
     * @param   {string}    _url
     * @return  string
     * @static
     */
    function urlHostName( _url ){
        var _r = &#x27;&#x27;, _url = _url || location.href;
        if( /\:\/\//.test( _url ) ){
            _url.replace( /^.*?\:\/\/([^\/]+)/, function( $0, $1 ){
                _r = $1;
            });
        }
        return _r;
    }
    /**
     * 把 URL 相对路径 转换为 绝对路径
     * @method  relativePath
     * @param   {string}    _path
     * @param   {string}    _url
     * @return  string
     * @static
     */
    function relativePath( _path, _url ){
        _url = _url || document.URL;
        _url = _url.replace(/^.*?\:\/\/[^\/]+/, &quot;&quot;).replace(/[^\/]+$/, &quot;&quot;);
        if(!_path){return _url;}  
        if(!/\/$/.test(_url)){_url += &quot;/&quot;;}

        if(/(^\.\.\/|^\.\/)/.test(_path)){
            var Re = new RegExp(&quot;^\\.\\.\\/&quot;), iCount = 0;    
            while(Re.exec(_path)!=null){
                _path = _path.replace(Re, &quot;&quot;);
                iCount++;
            }       
            for(var i=0; i&lt;iCount; i++){_url = _url.replace(/[^\/]+\/$/, &quot;&quot;);}    
            if(_url==&quot;&quot;) return &quot;/&quot;;  
            _path = _path.replace(/^\.\//, &quot;&quot;); 
            _path.replace( /\/\/$/, &#x27;/&#x27; );
            return _url+_path;
        }   
        return _path;
    }
     /**
     * 按格式输出字符串
     * @method printf
     * @static
     * @param   {string}    _str
     * @return  string
     * @example
     *      printf( &#x27;asdfasdf{0}sdfasdf{1}&#x27;, &#x27;000&#x27;, 1111 );
     *      //return asdfasdf000sdfasdf1111
     */
    function printf( _str ){
        for(var i = 1, _len = arguments.length; i &lt; _len; i++){
            _str = _str.replace( new RegExp(&#x27;\\{&#x27;+( i - 1 )+&#x27;\\}&#x27;, &#x27;g&#x27;), arguments[i] );
        }
        return _str;
    }
     /**
     * 按格式输出字符串
     * @method printKey
     * @static
     * @param   {string}    _str
     * @param   {object}    _keys
     * @return  string
     * @example
     *      JC.f.printKey( &#x27;asdfasdf{key1}sdfasdf{key2},{0}&#x27;, { &#x27;key1&#x27;: &#x27;000&#x27;, &#x27;key2&#x27;: 1111, &#x27;0&#x27;: 222 );
     *      //return asdfasdf000sdfasdf1111,222
     */
    function printKey( _str, _keys ){
        for( var k in _keys ){
            _str = _str.replace( new RegExp(&#x27;\\{&#x27;+( k )+&#x27;\\}&#x27;, &#x27;g&#x27;), _keys[k] );
        }
        return _str;
    }

    /**
     * 判断URL中是否有某个get参数
     * @method  hasUrlParam
     * @param   {string}    _url
     * @param   {string}    _key
     * @return  bool
     * @static
     * @example
     *      var bool = hasUrlParam( &#x27;getkey&#x27; );
     */
    function hasUrlParam( _url, _key ){
        var _r = false;
        if( !_key ){ _key = _url; _url = location.href; }
        if( /\?/.test( _url ) ){
            _url = _url.split( &#x27;?&#x27; ); _url = _url[ _url.length - 1 ];
            _url = _url.split(&#x27;&amp;&#x27;);
            for( var i = 0, j = _url.length; i &lt; j; i++ ){
                if( _url[i].split(&#x27;=&#x27;)[0].toLowerCase() == _key.toLowerCase() ){ _r = true; break; };
            }
        }
        return _r;
    }
    /**
     * 添加URL参数
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; delUrlParam, filterXSS
     * @method  addUrlParams
     * @param   {string}    _url
     * @param   {object}    _params
     * @return  string
     * @static
     * @example
            var url = addUrlParams( location.href, {&#x27;key1&#x27;: &#x27;key1value&#x27;, &#x27;key2&#x27;: &#x27;key2value&#x27; } );
     */ 
    function addUrlParams( _url, _params ){
        var sharp = &#x27;&#x27;;
        !_params &amp;&amp; ( _params = _url, _url = location.href );
        _url.indexOf(&#x27;#&#x27;) &gt; -1 &amp;&amp; ( sharp = _url.split(&#x27;#&#x27;)[1], _url = _url.split(&#x27;#&#x27;)[0] );
        for( var k in _params ){
            _url = delUrlParam(_url, k);
            _url.indexOf(&#x27;?&#x27;) &gt; -1 
                ? _url += &#x27;&amp;&#x27; + k +&#x27;=&#x27; + _params[k]
                : _url += &#x27;?&#x27; + k +&#x27;=&#x27; + _params[k];
        }
        sharp &amp;&amp; ( _url += &#x27;#&#x27; + sharp );
        _url = filterXSS( _url.replace(/\?\&amp;/g, &#x27;?&#x27; ) );
        return _url;   

    }
    /**
     * xss 过滤函数
     * @method filterXSS
     * @param   {string}    _s
     * @return string
     * @static
     */
    function filterXSS( _s ){
        _s &amp;&amp; (
            _s = _s
                    .replace( /&lt;/g, &#x27;&amp;lt;&#x27; )
                    .replace( /&gt;/g, &#x27;&amp;gt;&#x27; )
        );
        return _s;
    }
    /**
     * 取URL参数的值
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; filterXSS
     * @method  getUrlParam
     * @param   {string}    _url
     * @param   {string}    _key
     * @return  string
     * @static
     * @example
            var defaultTag = getUrlParam(location.href, &#x27;tag&#x27;);  
     */ 
    function getUrlParam( _url, _key ){
        var _r = &#x27;&#x27;, _ar, i, _items;
        !_key &amp;&amp; ( _key = _url, _url = location.href );
        _url.indexOf(&#x27;#&#x27;) &gt; -1 &amp;&amp; ( _url = _url.split(&#x27;#&#x27;)[0] );
        if( _url.indexOf(&#x27;?&#x27;) &gt; -1 ){
            _ar = _url.split(&#x27;?&#x27;)[1].split(&#x27;&amp;&#x27;);
            for( i = 0; i &lt; _ar.length; i++ ){
                _items = _ar[i].split(&#x27;=&#x27;);
                _items[0] = decodeURIComponent( _items[0] || &#x27;&#x27; ).replace(/^\s+|\s+$/g, &#x27;&#x27;);
                if( _items[0].toLowerCase() == _key.toLowerCase() ){
                    _r = filterXSS( _items[1] || &#x27;&#x27; );
                    break;
                } 
            }
        }
        return _r;
    }
    /**
     * 取URL参数的值, 这个方法返回数组
     * &lt;br /&gt;与 getUrlParam 的区别是可以获取 checkbox 的所有值
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; filterXSS
     * @method  getUrlParams
     * @param   {string}    _url
     * @param   {string}    _key
     * @return  Array
     * @static
     * @example
            var params = getUrlParams(location.href, &#x27;tag&#x27;);  
     */ 
    function getUrlParams( _url, _key ){
        var _r = [], _params, i, j, _items;
        !_key &amp;&amp; ( _key = _url, _url = location.href );
        _url = _url.replace(/[\?]+/g, &#x27;?&#x27;).split(&#x27;?&#x27;);
        if( _url.length &gt; 1 ){
            _url = _url[1];
            _params = _url.split(&#x27;&amp;&#x27;);
            if( _params.length ){
                for( i = 0, j = _params.length; i &lt; j; i++ ){
                    _items = _params[i].split(&#x27;=&#x27;);
                    _items[0] = decodeURIComponent( _items[0] ) || &#x27;&#x27;;
                    if( _items[0].trim() == _key ){
                        _r.push( filterXSS( _items[1] || &#x27;&#x27; ) );
                    }
                }
            }
        }
        return _r;
    }
    /**
     * 删除URL参数
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; filterXSS
     * @method  delUrlParam
     * @param  {string}    _url
     * @param  {string}    _key
     * @return  string
     * @static
     * @example
            var url = delUrlParam( location.href, &#x27;tag&#x27; );
     */ 
    function delUrlParam( _url, _key ){
        var sharp = &#x27;&#x27;, params, tmpParams = [], i, item;
        !_key &amp;&amp; ( _key = _url, _url = location.href );
        _url.indexOf(&#x27;#&#x27;) &gt; -1 &amp;&amp; ( sharp = _url.split(&#x27;#&#x27;)[1], _url = _url.split(&#x27;#&#x27;)[0] );
        if( _url.indexOf(&#x27;?&#x27;) &gt; -1 ){
            params = _url.split(&#x27;?&#x27;)[1].split(&#x27;&amp;&#x27;);
            _url = _url.split(&#x27;?&#x27;)[0];
            for( i = 0; i &lt; params.length; i++ ){
                var items = params[i].split(&#x27;=&#x27;);
                items[0] = items[0].replace(/^\s+|\s+$/g, &#x27;&#x27;);
                if( items[0].toLowerCase() == _key.toLowerCase() ) continue;
                tmpParams.push( items.join(&#x27;=&#x27;) )
            }
            _url += &#x27;?&#x27; + tmpParams.join(&#x27;&amp;&#x27;);
        }
        sharp &amp;&amp; ( _url += &#x27;#&#x27; + sharp );
       _url = filterXSS( _url );
        return _url;
    }
    /**
     * 批量删除URL参数
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; delUrlParam
     * @method  delUrlParams
     * @param  {string}    _url
     * @param  {Array}    _keys
     * @return  string
     * @static
     * @example
            var url = delUrlParam( location.href, [ &#x27;k1&#x27;, &#x27;k2&#x27; ] );
     */ 
    function delUrlParams( _url, _keys ){
        !_keys &amp;&amp; ( _keys = _url, _url = location.href );
        for( var k in _keys ) _url = delUrlParam( _url, _keys[ k ] );
        return _url;
    }
    /**
     * 提示需要 HTTP 环境
     * @method  httpRequire
     * @static
     * @param  {string}  _msg   要提示的文字, 默认 &quot;本示例需要HTTP环境&#x27;
     * @return  bool     如果是HTTP环境返回true, 否则返回false
     */
    function httpRequire( _msg ){
        _msg = _msg || &#x27;本示例需要HTTP环境&#x27;;
        if( /file\:|\\/.test( location.href ) ){
            alert( _msg );
            return false;
        }
        return true;
    }
    /**
     * 删除 URL 的锚点
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; addUrlParams, filterXSS
     * @method removeUrlSharp
     * @static
     * @param   {string}    _url
     * @param   {bool}      _nornd      是否不添加随机参数
     * @param   {string}    _rndName
     * @return  string
     */
    function removeUrlSharp( _url, _nornd, _rndName ){   
        !_url &amp;&amp; ( _url = location.href );
        _url = _url.replace(/\#[\s\S]*/, &#x27;&#x27;);
        _rndName = _rndName || &#x27;rnd&#x27;;
        var _rndO;
        !_nornd &amp;&amp; ( _rndO = {}
                        , _rndO[ _rndName ] = new Date().getTime()
                        , _url = addUrlParams( _url, _rndO ) 
        );
        _url = filterXSS( _url );
        return _url;
    }
    /**
     * 重载页面
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; removeUrlSharp, addUrlParams, filterXSS
     * @method reloadPage
     * @static
     * @param   {string}    _url
     * @param   {bool}      _nornd
     * @param   {int}       _delayms
     */ 
    function reloadPage( _url, _nornd, _delayMs  ){
        _delayMs = _delayMs || 0;

        _url = removeUrlSharp( _url || location.href, _nornd );
        !_nornd &amp;&amp; ( _url = addUrlParams( _url, { &#x27;rnd&#x27;: new Date().getTime() } ) );
        _url = filterXSS( _url );

        setTimeout( function(){
            location.href = _url;
        }, _delayMs);
        return _url;
    }
    /**
     * 取小数点的N位
     * &lt;br /&gt;JS 解析 浮点数的时候，经常出现各种不可预知情况，这个函数就是为了解决这个问题
     * @method  parseFinance
     * @static
     * @param   {number}    _i
     * @param   {int}       _dot, default = 2
     * @return  number
     */
    function parseFinance( _i, _dot ){
        _i = parseFloat( _i ) || 0;
        typeof _dot == &#x27;undefined&#x27; &amp;&amp; ( _dot = 2 );
        _i &amp;&amp; ( _i = parseFloat( _i.toFixed( _dot ) ) );
        return _i;
    }
    /**
     * js 附加字串函数
     * @method  padChar
     * @static
     * @param   {string}    _str
     * @param   {intl}      _len
     * @param   {string}    _char
     * @return  string
     */
    function padChar( _str, _len, _char ){
        _len  = _len || 2; _char = _char || &quot;0&quot;; 
        _str += &#x27;&#x27;;
        if( _str.length &gt;_str ) return _str;
        _str = new Array( _len + 1 ).join( _char ) + _str
        return _str.slice( _str.length - _len );
    }
    /**
     * 格式化日期为 YYYY-mm-dd 格式
     * &lt;br /&gt;&lt;b&gt;require&lt;/b&gt;: pad\_char\_f
     * @method  formatISODate
     * @static
     * @param   {date}                  _date       要格式化日期的日期对象
     * @param   {string|undefined}      _split      定义年月日的分隔符, 默认为 &#x27;-&#x27;
     * @return  string
     *
     */
    function formatISODate( _date, _split ){
        _date = _date || new Date(); typeof _split == &#x27;undefined&#x27; &amp;&amp; ( _split = &#x27;-&#x27; );
        return [ _date.getFullYear(), padChar( _date.getMonth() + 1 ), padChar( _date.getDate() ) ].join(_split);
    }
    /**
     * 从 ISODate 字符串解析日期对象
     * @method  parseISODate
     * @static
     * @param   {string}    _datestr
     * @return  date
     */
    function parseISODate( _datestr ){
        if( !_datestr ) return;
        _datestr = _datestr.replace( /[^\d]+/g, &#x27;&#x27;);
        var _r;
        if( _datestr.length === 8 ){
            _r = new Date( _datestr.slice( 0, 4 )
                            , parseInt( _datestr.slice( 4, 6 ), 10 ) - 1
                            , parseInt( _datestr.slice( 6 ), 10 ) );
        }else if( _datestr.length === 6 ){
            _r = new Date( _datestr.slice( 0, 4 )
                            , parseInt( _datestr.slice( 4, 6 ), 10 ) - 1
                            , 1 );
        }

        return _r;
    }
    /**
     * 从日期字符串解析日期对象
     * &lt;br /&gt;兼容 JC.Calendar 日期格式
     * @method  parseDate
     * @param   {date}      _date
     * @param   {selector}  _selector   如果 _selector 为真, 则尝试从 _selector 的 html 属性 dateParse 对日期进行格式化
     * @param   {boolean}   _forceISO   是否强制转换为ISO日期
     * @return  {date|null}
     * @static
     */
    function parseDate( _date, _selector, _forceISO ){
        if( !_date ) return null;
        var _parse = parseISODate;
            
        _selector &amp;&amp; !_forceISO
            &amp;&amp; ( _selector = $( _selector ) ).length
            &amp;&amp; _selector.attr( &#x27;dateParse&#x27; )
            &amp;&amp; ( _parse = window[ _selector.attr( &#x27;dateParse&#x27; ) ] || _parse )
            ;
        _date = _parse( _date );
        _date &amp;&amp; _date.start &amp;&amp; ( _date = _date.start );
        return _date;
    }

    /**
     * 获取不带 时分秒的 日期对象
     * @method  pureDate
     * @param   {Date}  _d   可选参数, 如果为空 = new Date
     * @return  Date
     */
    function pureDate( _d ){
        var _r;
        _d = _d || new Date();
        _r = new Date( _d.getFullYear(), _d.getMonth(), _d.getDate() );
        return _r;
    }
    /**
    * 克隆日期对象
    * @method  cloneDate
    * @static
    * @param   {Date}  _date   需要克隆的日期
    * @return  {Date}  需要克隆的日期对象
    */
    function cloneDate( _date ){ var d = new Date(); d.setTime( _date.getTime() ); return d; }
    /**
     * 判断两个日期是否为同一天
     * @method  isSameDay
     * @static
     * @param   {Date}  _d1     需要判断的日期1
     * @param   {Date}  _d2     需要判断的日期2
     * @return {bool}
     */
    function isSameDay( _d1, _d2 ){
        return [_d1.getFullYear(), _d1.getMonth(), _d1.getDate()].join() === [
                _d2.getFullYear(), _d2.getMonth(), _d2.getDate()].join()
    }
    /**
     * 判断两个日期是否为同一月份
     * @method  isSameMonth
     * @static
     * @param   {Date}  _d1     需要判断的日期1
     * @param   {Date}  _d2     需要判断的日期2
     * @return {bool}
     */
    function isSameMonth( _d1, _d2 ){
        return [_d1.getFullYear(), _d1.getMonth()].join() === [
                _d2.getFullYear(), _d2.getMonth()].join()
    }

    /**
     * 判断两个日期是否为同一季度
     * @method  isSameWeek
     * @static
     * @param   {Date}  _d1     需要判断的日期1
     * @param   {Date}  _d2     需要判断的日期2
     * @return {bool}
     */
    function isSameWeek( _d1, _d2 ){
        var _weeks = [],
            _r = false,
            i = 0,
            l;

        _weeks = weekOfYear(_d1.getFullYear());
        
        _d1 = _d1.getTime();
        _d2 = _d2.getTime();

        for ( i = 0, l = _weeks.length; i &lt; l; i++ ) {
            if ( (_d1 &gt;= _weeks[i].start &amp;&amp; _d1 &lt;= _weeks[i].end) 
                &amp;&amp; ( _d2 &gt;= _weeks[i].start &amp;&amp; _d2 &lt;= _weeks[i].end ) 
                ) {
                console.log(i, _d1, _weeks[i]);
                return true;
            }  
        }

        return _r;
    }

    /**
     * 判断两个日期是否为同一季度
     * @method  isSameSeason
     * @static
     * @param   {Date}  _d1     需要判断的日期1
     * @param   {Date}  _d2     需要判断的日期2
     * @return {bool}
     */
    function isSameSeason( _d1, _d2 ){
        var _seasons = [],
            _r = false,
            i = 0,
            l ;

        if ( !isSameYear( _d1, _d2 ) ) {
            return false;
        }

        _seasons = seasonOfYear( _d1.getFullYear() );
        _d1 = _d1.getTime();
        _d2 = _d2.getTime();
        
        for (i = 0, l = _seasons.length ; i &lt; l; i++ ) {
            if ( (_d1 &gt;= _seasons[i].start &amp;&amp; _d1 &lt;= _seasons[i].end) 
                &amp;&amp; ( _d2 &gt;= _seasons[i].start &amp;&amp; _d2 &lt;= _seasons[i].end ) ) {
                return true;
            }     
        }

        return _r;
    }

    /**
     * 判断两个日期是否为同一年
     * @method  isSameSeason
     * @static
     * @param   {Date}  _d1     需要判断的日期1
     * @param   {Date}  _d2     需要判断的日期2
     * @return {bool}
     */
    function isSameYear( _d1, _d2 ) {
        return _d1.getFullYear() === _d2.getFullYear();
    }

    /**
     * 取一年中所有的星期, 及其开始结束日期
     * @method  weekOfYear
     * @static
     * @param   {int}   _year
     * @param   {int}   _dayOffset  每周的默认开始为周几, 默认0(周一)
     * @return  Array
     */
    function weekOfYear( _year, _dayOffset ){
        var _r = [], _tmp, _count = 1, _dayOffset = _dayOffset || 0
            , _year = parseInt( _year, 10 )
            , _d = new Date( _year, 0, 1 );
        /**
         * 元旦开始的第一个星期一开始的一周为政治经济上的第一周
         */
         _d.getDay() &gt; 1 &amp;&amp; _d.setDate( _d.getDate() - _d.getDay() + 7 );

         _d.getDay() === 0 &amp;&amp; _d.setDate( _d.getDate() + 1 );

         _dayOffset &gt; 0 &amp;&amp; ( _dayOffset = (new Date( 2000, 1, 2 ) - new Date( 2000, 1, 1 )) * _dayOffset );

        while( _d.getFullYear() &lt;= _year ){
            _tmp = { &#x27;week&#x27;: _count++, &#x27;start&#x27;: null, &#x27;end&#x27;: null };
            _tmp.start = _d.getTime() + _dayOffset;
            //_tmp.start = formatISODate(_d);
            _d.setDate( _d.getDate() + 6 );
            _tmp.end = _d.getTime() + _dayOffset;
            //_tmp.end = formatISODate(_d);
            _d.setDate( _d.getDate() + 1 );
            if( _d.getFullYear() &gt; _year ) {
                _d = new Date( _d.getFullYear(), 0, 1 );
                if( _d.getDay() &lt; 2 ) break;
             }
            _r.push( _tmp );
        }
        return _r;
    }
    /**
     * 取一年中所有的季度, 及其开始结束日期
     * @method  seasonOfYear
     * @static
     * @param   {int}   _year
     * @return  Array
     */
    function seasonOfYear( _year ){
        var _r = []
            , _year = parseInt( _year, 10 )
            ;

        _r.push( 
                {
                    start: pureDate( new Date( _year, 0, 1 ) )
                    , end: pureDate( new Date( _year, 2, 31 ) )
                    , season: 1
                }, {
                    start: pureDate( new Date( _year, 3, 1 ) )
                    , end: pureDate( new Date( _year, 5, 30 ) )
                    , season: 2
                }, {
                    start: pureDate( new Date( _year, 6, 1 ) )
                    , end: pureDate( new Date( _year, 8, 30 ) )
                    , season: 3
                }, {
                    start: pureDate( new Date( _year, 9, 1 ) )
                    , end: pureDate( new Date( _year, 11, 31 ) )
                    , season: 4
                }
        );
                

        return _r;
    }


    /**
     * 取得一个月份中最大的一天
     * @method  maxDayOfMonth
     * @static
     * @param   {Date}  _date
     * @return {int} 月份中最大的一天
     */
    function maxDayOfMonth( _date ){
        var _r, _d = new Date( _date.getFullYear(), _date.getMonth() + 1 );
            _d.setDate( _d.getDate() - 1 );
            _r = _d.getDate();
        return _r;
    }
    /**
     * 取当前脚本标签的 src路径 
     * @method  scriptPath
     * @static
     * @return  {string} 脚本所在目录的完整路径
     */
    function scriptPath(){
        var _sc = document.getElementsByTagName(&#x27;script&#x27;), _sc = _sc[ _sc.length - 1 ], _path = _sc.getAttribute(&#x27;src&#x27;);
        if( /\//.test( _path ) ){ _path = _path.split(&#x27;/&#x27;); _path.pop(); _path = _path.join(&#x27;/&#x27;) + &#x27;/&#x27;; }
        else if( /\\/.test( _path ) ){ _path = _path.split(&#x27;\\&#x27;); _path.pop(); _path = _path.join(&#x27;\\&#x27;) + &#x27;/&#x27;; }
        return _path;
    }
    /**
     * 缓动函数, 动画效果为按时间缓动 
     * &lt;br /&gt;这个函数只考虑递增, 你如果需要递减的话, 在回调里用 _maxVal - _stepval 
     * @method  easyEffect
     * @static
     * @param   {function}  _cb         缓动运动时的回调
     * @param   {number}    _maxVal     缓动的最大值, default = 200
     * @param   {number}    _startVal   缓动的起始值, default = 0
     * @param   {number}    _duration   缓动的总时间, 单位毫秒, default = 200
     * @param   {number}    _stepMs     缓动的间隔, 单位毫秒, default = 2
     * @return  interval
     * @example
            $(document).ready(function(){
                window.js_output = $(&#x27;span.js_output&#x27;);
                window.ls = [];
                window.EFF_INTERVAL = easyEffect( effectcallback, 100);
            });

            function effectcallback( _stepval, _done ){
                js_output.html( _stepval );
                ls.push( _stepval );

                !_done &amp;&amp; js_output.html( _stepval );
                _done &amp;&amp; js_output.html( _stepval + &#x27;&lt;br /&gt;&#x27; + ls.join() );
            }
     */
    function easyEffect( _cb, _maxVal, _startVal, _duration, _stepMs ){
        var _beginDate = new Date(), _timepass
            , _maxVal = _maxVal || 200
            , _startVal = _startVal || 0
            , _maxVal = _maxVal - _startVal 
            , _tmp = 0
            , _done
            , _duration = _duration || 200
            , _stepMs = _stepMs || 2
            ;
        //JC.log( &#x27;_maxVal:&#x27;, _maxVal, &#x27;_startVal:&#x27;, _startVal, &#x27;_duration:&#x27;, _duration, &#x27;_stepMs:&#x27;, _stepMs );

        var _interval = setInterval(
            function(){
                _timepass = new Date() - _beginDate;
                _tmp = _timepass / _duration * _maxVal;
                _tmp;
                if( _tmp &gt;= _maxVal ){
                    _tmp = _maxVal;
                    _done = true;
                    clearInterval( _interval );
                }
                _cb &amp;&amp; _cb( _tmp + _startVal, _done );
            }, _stepMs );

        return _interval;
    }
    /**
     * 把输入值转换为布尔值
     * @method parseBool
     * @param   {*} _input
     * @return bool
     * @static
     */
    function parseBool( _input ){
        if( typeof _input == &#x27;string&#x27; ){
            _input = _input.replace( /[\s]/g, &#x27;&#x27; ).toLowerCase();
            if( _input &amp;&amp; ( _input == &#x27;false&#x27; 
                            || _input == &#x27;0&#x27; 
                            || _input == &#x27;null&#x27;
                            || _input == &#x27;undefined&#x27;
           )) _input = false;
           else if( _input ) _input = true;
        }
        return !!_input;
    }
    /**
     * 绑定或清除 mousewheel 事件
     * @method  mousewheelEvent
     * @param   {function}  _cb
     * @param   {bool}      _detach
     * @param   {selector}  _selector, default = document
     * @static
     */
    function mousewheelEvent( _cb, _detach, _selector ){
        _selector = _selector || document;
        var _evt =  (/Firefox/i.test(navigator.userAgent))
            ? &quot;DOMMouseScroll&quot; 
            : &quot;mousewheel&quot;
            ;
        _selector.attachEvent &amp;&amp; ( _evt = &#x27;on&#x27; + _evt );

        if( _detach ){
            _selector.detachEvent &amp;&amp; document.detachEvent( _evt, _cb )
            _selector.removeEventListener &amp;&amp; document.removeEventListener( _evt, _cb );
        }else{
            _selector.attachEvent &amp;&amp; document.attachEvent( _evt, _cb )
            _selector.addEventListener &amp;&amp; document.addEventListener( _evt, _cb );
        }
    }
    /**
     * 获取 selector 的指定父级标签
     * @method  getJqParent
     * @param   {selector}  _selector
     * @param   {selector}  _filter
     * @return selector
     * @require jquery
     * @static
     */
    function getJqParent( _selector, _filter ){
        _selector = $(_selector);
        var _r;

        if( _filter ){
            while( (_selector = _selector.parent()).length ){
                if( _selector.is( _filter ) ){
                    _r = _selector;
                    break;
                }
            }
        }else{
            _r = _selector.parent();
        }

        return _r;
    }
    /**
     * 扩展 jquery 选择器
     * &lt;br /&gt;扩展起始字符的 &#x27;/&#x27; 符号为 jquery 父节点选择器
     * &lt;br /&gt;扩展起始字符的 &#x27;|&#x27; 符号为 jquery 子节点选择器
     * &lt;br /&gt;扩展起始字符的 &#x27;(&#x27; 符号为 jquery 父节点查找识别符( getJqParent )
     * @method  parentSelector
     * @param   {selector}  _item
     * @param   {String}    _selector
     * @param   {selector}  _finder
     * @return  selector
     * @require jquery
     * @static
     */
    function parentSelector( _item, _selector, _finder ){
        _item &amp;&amp; ( _item = $( _item ) );
        if( /\,/.test( _selector ) ){
            var _multiSelector = [], _tmp;
            _selector = _selector.split(&#x27;,&#x27;);
            $.each( _selector, function( _ix, _subSelector ){
                _subSelector = _subSelector.trim();
                _tmp = parentSelector( _item, _subSelector, _finder );
                _tmp &amp;&amp; _tmp.length 
                    &amp;&amp;  ( 
                            ( _tmp.each( function(){ _multiSelector.push( $(this) ) } ) )
                        );
            });
            return $( _multiSelector );
        }
        var _pntChildRe = /^([\/]+)/, _childRe = /^([\|]+)/, _pntRe = /^([&lt;\(]+)/;
        if( _pntChildRe.test( _selector ) ){
            _selector = _selector.replace( _pntChildRe, function( $0, $1 ){
                for( var i = 0, j = $1.length; i &lt; j; i++ ){
                    _item = _item.parent();
                }
                _finder = _item;
                return &#x27;&#x27;;
            });
            _selector = _selector.trim();
            return _selector ? _finder.find( _selector ) : _finder;
        }else if( _childRe.test( _selector ) ){
            _selector = _selector.replace( _childRe, function( $0, $1 ){
                for( var i = 1, j = $1.length; i &lt; j; i++ ){
                    _item = _item.parent();
                }
                _finder = _item;
                return &#x27;&#x27;;
            });
            _selector = _selector.trim();
            return _selector ? _finder.find( _selector ) : _finder;
        }else if( _pntRe.test( _selector ) ){
            _selector = _selector.replace( _pntRe, &#x27;&#x27; ).trim();
            if( _selector ){
                if( /[\s]/.test( _selector ) ){
                    var _r;
                    _selector.replace( /^([^\s]+)([\s\S]+)/, function( $0, $1, $2 ){
                        _r = getJqParent( _item, $1 ).find( $2.trim() );
                    });
                    return _r || _selector;
                }else{
                    return getJqParent( _item, _selector );
                }
            }else{
                return _item.parent();
            }
        }else{
            return _finder ? _finder.find( _selector ) : jQuery( _selector );
        }
    }
    /**
     * 获取脚本模板的内容
     * @method  scriptContent
     * @param   {selector}  _selector
     * @return  string
     * @static
     */
    function scriptContent( _selector ){
        var _r = &#x27;&#x27;;
        _selector 
            &amp;&amp; ( _selector = $( _selector ) ).length 
            &amp;&amp; ( _r = _selector.html().trim().replace( /[\r\n]/g, &#x27;&#x27;) )
            ;
        return _r;
    }
    /**
     * 取函数名 ( 匿名函数返回空 )
     * @method  funcName
     * @param   {function}  _func
     * @return  string
     * @static
     */
    function funcName(_func){
      var _re = /^function\s+([^()]+)[\s\S]*/
          , _r = &#x27;&#x27;
          , _fStr = _func.toString();    
      //JC.log( _fStr );
      _re.test( _fStr ) &amp;&amp; ( _r = _fStr.replace( _re, &#x27;$1&#x27; ) );
      return _r.trim();
    }
    /**
     * 动态添加内容时, 初始化可识别的组件
     * &lt;dl&gt;
     *      &lt;dt&gt;目前会自动识别的组件&lt;/dt&gt;
     *      &lt;dd&gt;
     *          Bizs.CommonModify, JC.Panel, JC.Dialog
     *          &lt;br /&gt;&lt;b&gt;自动识别的组件不用显式调用  jcAutoInitComps 去识别可识别的组件&lt;/b&gt;
     *      &lt;/dd&gt;
     * &lt;/d&gt;
     * &lt;dl&gt;
     *      &lt;dt&gt;可识别的组件&lt;/dt&gt;
     *      &lt;dd&gt;
     *          JC.AutoSelect, JC.AutoChecked, JC.AjaxUpload, JC.Calendar
     *          , JC.Drag, JC.DCalendar, JC.Placeholder, JC.TableFreeze, JC.ImageCutter
     *          &lt;br /&gt;Bizs.DisableLogic, Bizs.FormLogic, Bizs.MoneyTips, Bizs.AutoSelectComplete
     *      &lt;/dd&gt;
     * &lt;/d&gt;
     * @method  jcAutoInitComps
     * @param   {selector}  _selector
     * @static
     */
    function jcAutoInitComps( _selector ){
        _selector = $( _selector || document );
        
        if( !( _selector &amp;&amp; _selector.length &amp;&amp; window.JC ) ) return;
        /**
         * 联动下拉框
         */
        JC.AutoSelect &amp;&amp; JC.AutoSelect( _selector );
        /**
         * 日历组件
         */
        JC.Calendar &amp;&amp; JC.Calendar.initTrigger( _selector );
        /**
         * 双日历组件
         */
        JC.DCalendar &amp;&amp; JC.DCalendar.init &amp;&amp; JC.DCalendar.init( _selector );
        /**
         * 全选反选
         */
        JC.AutoChecked &amp;&amp; JC.AutoChecked( _selector );
        /**
         * Ajax 上传
         */
        JC.AjaxUpload &amp;&amp; JC.AjaxUpload.init( _selector );
        /**
         * 占位符
         */
        JC.Placeholder &amp;&amp; JC.Placeholder.init( _selector );
        /**
         * 表格冻结
         */
        JC.TableFreeze &amp;&amp; JC.TableFreeze.init( _selector );
        /**
         * 拖曳
         */
        JC.Drag &amp;&amp; JC.Drag.init( _selector );
        /**
         * 图片裁切
         */
        JC.ImageCutter &amp;&amp; JC.ImageCutter.init( _selector );

        if( !window.Bizs ) return;
        /**
         * disable / enable
         */
        Bizs.DisableLogic &amp;&amp; Bizs.DisableLogic.init( _selector );
        /**
         * 表单提交逻辑
         */
        Bizs.FormLogic &amp;&amp; Bizs.FormLogic.init( _selector );
        /**
         * 格式化金额
         */
        Bizs.MoneyTips &amp;&amp; Bizs.MoneyTips.init( _selector );
        /**
         * 自动完成
         */
        Bizs.AutoSelectComplete &amp;&amp; Bizs.AutoSelectComplete.init( _selector );

        /**
         *排期日期展示
        */
        Bizs.TaskViewer &amp;&amp; Bizs.TaskViewer.init(_selector);
    }
    /**
     * URL 占位符识别功能
     * &lt;br /&gt;&lt;b&gt;require:&lt;/b&gt; addUrlParams, filterXSS
     * @method  urlDetect
     * @param   {String}    _url    如果 起始字符为 URL, 那么 URL 将祝为本页的URL
     * @return  string
     * @static
     * @example
     *      urlDetect( &#x27;?test&#x27; ); //output: ?test
     *
     *      urlDetect( &#x27;URL,a=1&amp;b=2&#x27; ); //output: your.com?a=1&amp;b=2
     *      urlDetect( &#x27;URL,a=1,b=2&#x27; ); //output: your.com?a=1&amp;b=2
     *      urlDetect( &#x27;URLa=1&amp;b=2&#x27; ); //output: your.com?a=1&amp;b=2
     */
    function urlDetect( _url ){
        _url = _url || &#x27;&#x27;;
        var _r = _url, _tmp, i, j, _items;
        if( /^URL/.test( _url ) ){
            _tmp = _url.replace( /^URL/, &#x27;&#x27; ).replace( /[\s]*,[\s]*/g, &#x27;,&#x27; ).trim().split(&#x27;,&#x27;);
            _url = location.href;
            var _d = {}, _concat = [];
            if( _tmp.length ){
                for( i = 0, j = _tmp.length; i &lt; j; i ++ ){
                     /\&amp;/.test( _tmp[i] )
                         ? ( _concat = _concat.concat( _tmp[i].split(&#x27;&amp;&#x27;) ) )
                         : ( _concat = _concat.concat( _tmp[i] ) )
                         ;
                }
                _tmp = _concat;
            }
            for( i = 0, j = _tmp.length; i &lt; j; i++ ){
                _items = _tmp[i].replace(/[\s]+/g, &#x27;&#x27;).split( &#x27;=&#x27; );
                if( !_items[0] ) continue;
                _d[ _items[0] ] = _items[1] || &#x27;&#x27;;
            }
            _url = addUrlParams( _url, _d );
            _r = _url;
        }
        _r = filterXSS( _url );
        return _r;
    }
    /**
     * 日期占位符识别功能
     * @method  dateDetect
     * @param   {String}    _dateStr    如果起始字符为 NOW, 那么将视为当前日期
     *                                  , 如果起始字符为 NOWFirst, 那么将视为当前月的1号
     * @return  {date|null}
     * @static
     * @example
     *      dateDetect( &#x27;now&#x27; ); //2014-10-02
     *      dateDetect( &#x27;now,3d&#x27; ); //2013-10-05
     *      dateDetect( &#x27;now,-3d&#x27; ); //2013-09-29
     *      dateDetect( &#x27;now,2w&#x27; ); //2013-10-16
     *      dateDetect( &#x27;now,-2m&#x27; ); //2013-08-02
     *      dateDetect( &#x27;now,4y&#x27; ); //2017-10-02
     *
     *      dateDetect( &#x27;now,1d,1w,1m,1y&#x27; ); //2014-11-10
     */
    function dateDetect( _dateStr ){
        var _r = null   
            , _re = /^now/i
            , _nowFirstRe = /^nowfirst/
            , _d, _ar, _item
            ;
        if( _dateStr &amp;&amp; typeof _dateStr == &#x27;string&#x27; ){
            if( _re.test( _dateStr ) || _nowFirstRe.test( _dateStr ) ){
                _d = new Date();
                if( _nowFirstRe.test(_dateStr ) ){
                    _d.setDate( 1 );
                }
                _dateStr = _dateStr.replace( _re, &#x27;&#x27; ).replace(/[\s]+/g, &#x27;&#x27;);
                _ar = _dateStr.split(&#x27;,&#x27;);

                var _red = /d$/i
                    , _rew = /w$/i
                    , _rem = /m$/i
                    , _rey = /y$/i
                    ;
                for( var i = 0, j = _ar.length; i &lt; j; i++ ){
                    _item = _ar[i] || &#x27;&#x27;;
                    if( !_item ) continue;
                    _item = _item.replace( /[^\-\ddwmy]+/gi, &#x27;&#x27; );

                    if( _red.test( _item ) ){
                        _item = parseInt( _item.replace( _red, &#x27;&#x27; ), 10 );
                        _item &amp;&amp; _d.setDate( _d.getDate() + _item );
                    }else if( _rew.test( _item ) ){
                        _item = parseInt( _item.replace( _rew, &#x27;&#x27; ), 10 );
                        _item &amp;&amp; _d.setDate( _d.getDate() + _item * 7 );
                    }else if( _rem.test( _item ) ){
                        _item = parseInt( _item.replace( _rem, &#x27;&#x27; ), 10 );
                        _item &amp;&amp; _d.setMonth( _d.getMonth() + _item );
                    }else if( _rey.test( _item ) ){
                        _item = parseInt( _item.replace( _rey, &#x27;&#x27; ), 10 );
                        _item &amp;&amp; _d.setFullYear( _d.getFullYear() + _item );
                    }
                }
                _r = _d;
            }else{
                _r = parseISODate( _dateStr );
            }
        }
        return _r;
    }
    ;(function(){
        /**
         * inject jquery val func, for hidden change event
         */
        if( !window.jQuery ) return;
        var _oldVal = $.fn.val;
        $.fn.val = 
            function(){
                var _r = _oldVal.apply( this, arguments ), _p = this;
                if( 
                    arguments.length
                    &amp;&amp; ( this.prop(&#x27;nodeName&#x27;) || &#x27;&#x27;).toLowerCase() == &#x27;input&#x27; 
                    &amp;&amp; ( this.attr(&#x27;type&#x27;) || &#x27;&#x27; ).toLowerCase() == &#x27;hidden&#x27;
                ){
                    setTimeout( function(){ _p.trigger( &#x27;change&#x27; ); }, 1 );
                }
                return _r;
            };
    }());
    /**
     * 逗号格式化金额
     * @method  moneyFormat
     * @param   {int|string}    _number
     * @param   {int}           _len
     * @param   {int}           _floatLen
     * @param   {int}           _splitSymbol
     * @return  string
     * @static
     */
    function moneyFormat(_number, _len, _floatLen, _splitSymbol){
        var _def = &#x27;0.00&#x27;;
        !_len &amp;&amp; ( _len = 3 );
        typeof _floatLen == &#x27;undefined&#x27; &amp;&amp; ( _floatLen = 2 );
        !_splitSymbol &amp;&amp; ( _splitSymbol = &#x27;,&#x27; );

        typeof _number == &#x27;number&#x27; &amp;&amp; ( _number = parseFinance( _number, _floatLen ) );
        if( typeof _number == &#x27;string&#x27; ){
            _number = _number.replace( /[,]/g, &#x27;&#x27; );
            if( !/^[\d\.]+$/.test( _number ) ) return _def;
            if( _number.split(&#x27;.&#x27;).length &gt; 2 ) return _def;
        }

        if( !_number ) return _def;
        _number += &#x27;&#x27;; 

        _number = _number.replace( /[^\d\.]/g, &#x27;&#x27; );

        var _parts = _number.split(&#x27;.&#x27;), _sparts = [];

        while( _parts[0].length &gt; _len ){
            var _tmp = _parts[0].slice( _parts[0].length - _len, _parts[0].length );
            //console.log( _tmp );
            _sparts.push( _tmp );
            _parts[0] = _parts[0].slice( 0, _parts[0].length - _len );
        }
        _sparts.push( _parts[0] );

        _parts[0] = _sparts.reverse().join( _splitSymbol );

        if( _floatLen ){
            !_parts[1] &amp;&amp; ( _parts[1] = &#x27;&#x27; );
            _parts[1] += new Array( _floatLen + 1 ).join(&#x27;0&#x27;);
            _parts[1] = _parts[1].slice( 0, _floatLen );
        }else{
            _parts.length &gt; 1 &amp;&amp; _parts.pop();
        }

        return _parts.join(&#x27;.&#x27;);
    }
    /**
     * 日期格式化 (具体格式请查看 PHP Date Formats)
     * @method  dateFormat
     * @param   {date}    _date     default = now
     * @param   {string}  _format   default = &quot;YY-MM-DD&quot;
     * @return  string
     * @static
     */
    function dateFormat( _date, _format ){
        typeof _date == &#x27;string&#x27; &amp;&amp; ( _format = _date, _date = new Date() );
        !_date &amp;&amp; ( _date = new Date() );
        !_format &amp;&amp; ( _format = &#x27;YY-MM-DD&#x27; );
        var _r = _format, _tmp
            , _monthName = [ &#x27;january&#x27;, &#x27;february&#x27;, &#x27;march&#x27;, &#x27;april&#x27;, &#x27;may&#x27;, &#x27;june&#x27;
                            , &#x27;july&#x27;, &#x27;august&#x27;, &#x27;september&#x27;, &#x27;october&#x27;, &#x27;november&#x27;, &#x27;december&#x27; ] 
            , _monthShortName = [&#x27;jan&#x27;, &#x27;feb&#x27;, &#x27;mar&#x27;, &#x27;apr&#x27;, &#x27;may&#x27;, &#x27;jun&#x27;, &#x27;jul&#x27;, &#x27;aug&#x27;, &#x27;sep&#x27;, &#x27;oct&#x27;, &#x27;nov&#x27;, &#x27;dec&#x27; ]
            ;

        _r = _r
            .replace( /YY/g, _date.getFullYear() )
            .replace( /WK/g, function(){
                var _r = 1, _offset = 0, _weeks;

                JC.Calendar &amp;&amp; ( _offset = JC.Calendar.weekDayOffset );

                _weeks = weekOfYear( _date.getFullYear(), JC.Calendar.weekDayOffset );

                $( _weeks ).each( function( _ix, _item ){
                    if( _date.getTime() &gt;= _item.start &amp;&amp; _date.getTime() &lt;= _item.end ){
                        _r = _item.week;
                        return false;
                    }
                });

                return _r;
            })
            .replace( /YQ/g, function(){
                var _r = 1, _offset = 0, _seasons;

                _seasons = seasonOfYear( _date.getFullYear() );

                $( _seasons ).each( function( _ix, _item ){
                    if( _date.getTime() &gt;= _item.start &amp;&amp; _date.getTime() &lt;= _item.end ){
                        _r = _item.season;
                        return false;
                    }
                });

                return _r;
            })
            .replace( /MM/g, padChar( _date.getMonth() + 1 ) )
            .replace( /DD/g, padChar( _date.getDate() ) )

            .replace( /yy/g, function( $0 ){
                _tmp = padChar( _date.getYear() );
                //JC.log( _date.getYear(), _tmp.slice( _tmp.length - 2 ) );
                return _tmp.slice( _tmp.length - 2 );
            })
            .replace( /mm/g, _date.getMonth() + 1 )
            .replace( /dd/g, _date.getDate() )
            .replace( /d/g, _date.getDate() )

            .replace( /y/g, _date.getFullYear() )

            .replace( /m/g, function( $0 ){
                return _monthName[ _date.getMonth() ];          
            })

            .replace( /M/g, function( $0 ){
                return _monthShortName[ _date.getMonth() ];          
            })
            ;

        return _r;
    }
    /**
     * 扩展对象属性
     * @method  extendObject
     * @param   {object}    _source
     * @param   {object}    _new
     * @param   {bool}      _overwrite      是否覆盖已有属性, default = true  
     * @return  object
     * @static
     */
    function extendObject( _source, _new, _overwrite ){
        typeof _overwrite == &#x27;undefined&#x27; &amp;&amp; ( _overwrite = true );
        if( _source &amp;&amp; _new ){
            for( var k in _new ){
                if( _overwrite ){
                    _source[ k ] = _new[ k ];
                }else if( !( k in _source ) ){
                    _source[ k ] = _new[ k ];
                }
            }
        }
        return _source;
    }
    /**
     * timeout 控制逻辑, 避免相同功能的 setTimeout 重复执行
     * @method  safeTimeout
     * @param   {timeout|function}  _timeout
     * @param   {object}            _obj    default = window.TIMEOUT_HOST || {}
     * @param   {string}            _name   default = &#x27;NORMAL&#x27;
     * @param   {int}               _ms     default = 50
     * @return  object
     * @static
     */
    function safeTimeout( _timeout, _obj, _name, _ms ){
        if( typeof _timeout == &#x27;undefined&#x27; ) return;
        _obj = $( _obj || ( window.TIMEOUT_HOST = window.TIMEOUT_HOST || {} ) );
        _name = _name || &#x27;NORMAL&#x27;;

        typeof _timeout == &#x27;function&#x27;
            &amp;&amp; ( _timeout = setTimeout( _timeout, _ms || 50 ) );

        _obj.data( _name ) &amp;&amp; clearTimeout( _obj.data( _name ) );
        _obj.data( _name, _timeout );
    }
    /**
     * URL 请求时, 获取对URL参数进行编码的函数
     * @method  encoder
     * @param   {selector}  _selector
     * @return  {encode function}   default encodeURIComponent
     * @static
     */
    function encoder( _selector ){
        _selector &amp;&amp; ( _selector = $( _selector ) );
        var _r;
        if( _selector &amp;&amp; _selector.length ){
            _r =_selector.attr( &#x27;validEncoder&#x27; ) || &#x27;encodeURIComponent&#x27;;
            _r = window[ _r ] || encodeURIComponent;
        }else{
            _r = encodeURIComponent;
        }
        return _r;
    }
    /**
     * 深度克隆对象
     * @method  cloneObject
     * @param   {Object}    _inObj
     * @return  Object
     * @static
     */
    function cloneObject( _inObj, _outObj ){
        _outObj = _outObj || {};
        var k, i, j;

        for( k in _inObj ){
            _outObj[ k ] = _inObj[ k ];
            switch( Object.prototype.toString.call( _outObj[ k ] ) ){

                case &#x27;[object Object]&#x27;: {
                      _outObj[ k ] = _outObj[ k ].constructor === Object
                        ?  cloneObject( _outObj[ k ] )
                        :  _outObj[ k ]
                        ;
                    break;
                }

                case &#x27;[object Array]&#x27;: {
                    _outObj[ k ] = _inObj[ k ].slice();
                    for( i = 0, j = _outObj[ k ].length; i &lt; j; i++ ){
                        if( Object.prototype.toString.call( _outObj[ k ][i] ) == &#x27;[object Object]&#x27; )
                            _outObj[ k ][ i ] = cloneObject( _outObj[ k ][ i ] );
                    }
                    break;
                }

                case &#x27;[object Date]&#x27;: {
                    _outObj[ k ] = new Date(); _outObj[ k ].setTime( _inObj[ k ].getTime() );
                    break;
                }

                default: _outObj[ k ] = _inObj[ k ];
            }
        }

        return _outObj;
    }
    /**
     * 获取 document 的 相关大小
     * @method  docSize
     * @param   {document}    _doc
     * @return  Object
     * @static
     */
    function docSize( _doc ){
        _doc = _doc || document;
        var _r = {
            width: 0, height: 0, docWidth: 0, docHeight: 0, bodyWidth: 0, bodyHeight: 0, scrollWidth: 0, scrollHeight: 0
        };

        _r.docWidth = _doc.documentElement.offsetWidth;
        _r.docHeight = _doc.documentElement.offsetHeight;

        _doc.body &amp;&amp; (
            _r.bodyWidth = _doc.body.offsetWidth
            , _r.bodyHeight = _doc.body.offsetHeight
        );

        _r.scrollWidth = _doc.documentElement.scrollWidth
        _r.scrollHeight = _doc.documentElement.scrollHeight

        _r.width = Math.max( _r.docWidth, _r.bodyWidth, _r.scrollHeight );
        _r.height = Math.max( _r.docHeight, _r.bodyHeight, _r.scrollHeight );

        return _r;
    }


    return JC.f;

});}( typeof define === &#x27;function&#x27; &amp;&amp; define.amd ? define : 
        function ( _name, _require, _cb) { 
            typeof _name == &#x27;function&#x27; &amp;&amp; ( _cb = _name );
            typeof _require == &#x27;function&#x27; &amp;&amp; ( _cb = _require ); 
            _cb &amp;&amp; _cb(); 
        }
        , window
    )
);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
