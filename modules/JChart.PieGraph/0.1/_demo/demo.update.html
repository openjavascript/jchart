<!doctype html>
<html>
<head>
<meta charset=utf-8 />
<title>Open JQuery Components Library - suches</title>
    <style>
        body{
            margin: 20px 40px;
        }

        .defDl > dd{
            border-bottom:1px solid #e2e3ea; 
            margin-bottom: 30px;
        }

        textarea { width: 300px; height: 100px; }

    </style>
    <link href='../../../../res/default/style.css' rel='stylesheet' />
    <script src="../../../../lib.js"></script>
    <script src="../../../../config.js"></script>
    <script>
        JC.debug = true;

        requirejs( [ 'JChart.PieGraph', 'JChart.Test', 'json2' ], function(){
            $( document ).delegate( 'button.js_updateChart', 'click', function( _evt ){
                var _p = $( this )
                    , _pnt = JC.f.getJqParent( _p, 'td' )
                    , _txa = _pnt.find( 'textarea' )
                    , _d = $.parseJSON( _txa.val().trim() )
                    , _ins = JC.BaseMVC.getInstance( $( 'div.js_jchart' ).first(), JChart.PieGraph )
                    ;

                _ins.update( _d );
            });
        });
    </script>
</head>    
<body>
    <h2>JChart.PieGraph 示例</h2>

    <div class="js_jchartTest"></div>

    <dl class="defDl">
        <dt></dt>
        <dd>
            <div class="js_jchart jchartPieGraph"
                chartScriptData="/script"
                >
                <script type="text/template">
                    {
                        "series": [
                            {
                                "name": "Browser share",
                                "data": [
                                    ["Firefox",  99]
                                    , ["chrome",  1]
                                ]
                            }
                       ]
                        , "plotOptions": {
                            "pie": {
                                "dataLabels": {
                                    "enabled": true
                                }
                            }
                        }
                        , legend:{
                            enabled: false
                        }

                    }
                </script>
            </div>

            <table>
                <tr>
                    <td>
                        <textarea>{"series":[{"name":"Browser share","data":[["Firefox",99],["chrome",1]]}],"plotOptions":{"pie":{"dataLabels":{"enabled":false}}}}</textarea>
                        <div><button type="button" class="js_updateChart">update</button></div>
                    </td>

                    <td>
                        <textarea>{"series":[{"name":"Browser share","data":[["Firefox",99],["chrome",1]]}],"plotOptions":{"pie":{"dataLabels":{"enabled":true}}}}</textarea>
                        <div><button type="button" class="js_updateChart">update</button></div>
                    </td>
                </tr>
            </table>
        </dd>
    </dl>
</body>
</html>


